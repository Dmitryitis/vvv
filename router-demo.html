<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã - SPA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="bg-white shadow-lg">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-2">
                        <div class="text-2xl font-bold text-blue-600">üè†</div>
                        <span class="text-xl font-semibold text-gray-900">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–≤–∞—Ä—Ç–∏—Ä</span>
                    </div>
                    
                    <div class="hidden md:flex space-x-6">
                        <router-link to="/" class="nav-link" active-class="nav-link-active">
                            –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
                        </router-link>
                        <router-link to="/about" class="nav-link" active-class="nav-link-active">
                            –û –ø—Ä–æ–µ–∫—Ç–µ
                        </router-link>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <router-view></router-view>
        </main>
    </div>

    <style>
        .nav-link {
            @apply px-3 py-2 text-gray-600 hover:text-blue-600 transition-colors duration-200 font-medium;
        }
        .nav-link-active {
            @apply text-blue-600 border-b-2 border-blue-600;
        }
        .container {
            max-width: 1200px;
        }
    </style>

    <script>
        const { createApp, ref, computed, onMounted, nextTick, provide, inject } = Vue;
        const { createRouter, createWebHashHistory } = VueRouter;

        // Calculator component with integrated history
        const Calculator = {
            template: `
                <div class="space-y-8">
                    <!-- Full-width Hero Banner -->
                    <div class="relative bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl overflow-hidden">
                        <div class="flex flex-col lg:flex-row items-center">
                            <div class="lg:w-1/2 p-8">
                                <h1 class="text-4xl font-bold text-gray-900 mb-4">–£–∑–Ω–∞–π—Ç–µ —Ä—ã–Ω–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã</h1>
                                <p class="text-gray-700 text-lg mb-6">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</p>
                                <div class="flex items-center space-x-4 text-sm text-gray-600">
                                    <div class="flex items-center">
                                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                        –¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                        –ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—á–µ—Ç
                                    </div>
                                </div>
                            </div>
                            <div class="lg:w-1/2">
                                <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
                                     alt="–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞" 
                                     class="w-full h-64 lg:h-80 object-cover">
                            </div>
                        </div>
                    </div>

                    <!-- Calculation Result (Full Width) -->
                    <div v-if="lastResult" class="bg-white rounded-lg shadow-lg p-6">
                        <h2 class="text-2xl font-semibold mb-4">–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ü–µ–Ω–∫–∏</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center p-4 bg-blue-50 rounded-lg">
                                <p class="text-sm text-gray-600 mb-1">–†—ã–Ω–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</p>
                                <p class="text-2xl font-bold text-blue-600">{{ formatPrice(lastResult.price) }}</p>
                            </div>
                            <div class="text-center p-4 bg-green-50 rounded-lg">
                                <p class="text-sm text-gray-600 mb-1">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞</p>
                                <p class="text-xl font-semibold text-green-600">{{ formatPrice(lastResult.priceRange?.min) }}</p>
                            </div>
                            <div class="text-center p-4 bg-orange-50 rounded-lg">
                                <p class="text-sm text-gray-600 mb-1">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞</p>
                                <p class="text-xl font-semibold text-orange-600">{{ formatPrice(lastResult.priceRange?.max) }}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Calculator Form and History Side by Side -->
                    <div class="flex gap-8">
                        <!-- Calculator Form -->
                        <div class="flex-1 bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
                            <h2 class="text-2xl font-semibold text-gray-900 mb-8">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã</h2>
                            <form @submit.prevent="calculatePrice" class="space-y-8">
                                
                                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–û–±—â–∞—è –ø–ª–æ—â–∞–¥—å (–º¬≤) *</label>
                                            <input v-model.number="apartmentData.totalArea" 
                                                   type="number" 
                                                   required 
                                                   placeholder="45"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–ñ–∏–ª–∞—è –ø–ª–æ—â–∞–¥—å (–º¬≤) *</label>
                                            <input v-model.number="apartmentData.livingArea" 
                                                   type="number" 
                                                   required 
                                                   placeholder="30"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–≠—Ç–∞–∂ *</label>
                                            <input v-model.number="apartmentData.floor" 
                                                   type="number" 
                                                   required 
                                                   placeholder="5"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                    </div>
                                </div>

                                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–ü–ª–æ—â–∞–¥—å –∫—É—Ö–Ω–∏ (–º¬≤)</label>
                                            <input v-model.number="apartmentData.kitchenArea" 
                                                   type="number" 
                                                   placeholder="12"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–≠—Ç–∞–∂–Ω–æ—Å—Ç—å –¥–æ–º–∞</label>
                                            <input v-model.number="apartmentData.totalFloors" 
                                                   type="number" 
                                                   placeholder="17"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç</label>
                                            <input v-model.number="apartmentData.rooms" 
                                                   type="number" 
                                                   placeholder="2"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–ì–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏</label>
                                            <input v-model.number="apartmentData.yearBuilt" 
                                                   type="number" 
                                                   min="1900" 
                                                   max="2025" 
                                                   placeholder="2018"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-600 mb-2">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –º–µ—Ç—Ä–æ (–º–∏–Ω)</label>
                                            <input v-model.number="apartmentData.metroDistance" 
                                                   type="number" 
                                                   min="1" 
                                                   max="60" 
                                                   placeholder="7"
                                                   class="w-full px-4 py-3 bg-gray-50 border-0 rounded-xl text-gray-900 placeholder-gray-400 focus:bg-white focus:ring-2 focus:ring-blue-500 transition-all">
                                        </div>
                                    </div>
                                </div>

                                <!-- –¢–∏–ø –¥–æ–º–∞ -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–¢–∏–ø –¥–æ–º–∞</h3>
                                    <div class="flex flex-wrap gap-3">
                                        <button v-for="(type, index) in buildingTypes" 
                                                :key="index"
                                                type="button"
                                                @click="apartmentData.buildingType = index + 1"
                                                :class="apartmentData.buildingType === index + 1 ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0">
                                            {{ type }}
                                        </button>
                                    </div>
                                </div>

                                <!-- –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–º–æ–Ω—Ç–∞ -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–º–æ–Ω—Ç–∞</h3>
                                    <div class="flex flex-wrap gap-3">
                                        <button v-for="(renovation, index) in renovationTypes" 
                                                :key="index"
                                                type="button"
                                                @click="apartmentData.renovation = index + 1"
                                                :class="apartmentData.renovation === index + 1 ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0">
                                            {{ renovation }}
                                        </button>
                                    </div>
                                </div>

                                <!-- –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</h3>
                                    <div class="flex flex-wrap gap-3">
                                        <button v-for="(objType, index) in objectTypes" 
                                                :key="index"
                                                type="button"
                                                @click="apartmentData.objectType = index + 1"
                                                :class="apartmentData.objectType === index + 1 ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0">
                                            {{ objType }}
                                        </button>
                                    </div>
                                </div>

                                <!-- –í–∏–¥ –∏–∑ –æ–∫–æ–Ω -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–í–∏–¥ –∏–∑ –æ–∫–æ–Ω</h3>
                                    <div class="flex flex-wrap gap-3">
                                        <button v-for="(view, index) in windowViews" 
                                                :key="index"
                                                type="button"
                                                @click="apartmentData.windowView = index + 1"
                                                :class="apartmentData.windowView === index + 1 ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0">
                                            {{ view }}
                                        </button>
                                    </div>
                                </div>

                                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-medium text-gray-900">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h3>
                                    <div class="flex flex-wrap gap-3">
                                        <button type="button"
                                                @click="apartmentData.balcony = !apartmentData.balcony"
                                                :class="apartmentData.balcony ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0 flex items-center gap-2">
                                            <span class="text-lg">üè†</span>
                                            –ë–∞–ª–∫–æ–Ω
                                        </button>
                                        <button type="button"
                                                @click="apartmentData.parking = !apartmentData.parking"
                                                :class="apartmentData.parking ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0 flex items-center gap-2">
                                            <span class="text-lg">üöó</span>
                                            –ü–∞—Ä–∫–æ–≤–∫–∞
                                        </button>
                                        <button type="button"
                                                @click="apartmentData.garbageChute = !apartmentData.garbageChute"
                                                :class="apartmentData.garbageChute ? 
                                                        'bg-black text-white shadow-md' : 
                                                        'bg-gray-50 text-gray-700 hover:bg-gray-100'"
                                                class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-200 border-0 flex items-center gap-2">
                                            <span class="text-lg">üóëÔ∏è</span>
                                            –ú—É—Å–æ—Ä–æ–ø—Ä–æ–≤–æ–¥
                                        </button>
                                    </div>
                                </div>

                                <!-- Calculate Button -->
                                <div class="pt-4">
                                    <button type="submit" 
                                            :disabled="!canCalculate || isCalculating"
                                            class="w-full bg-blue-600 text-white font-semibold py-4 px-6 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 text-lg">
                                        <span v-if="isCalculating" class="flex items-center justify-center">
                                            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                            </svg>
                                            –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏...
                                        </span>
                                        <span v-else>–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</span>
                                    </button>
                                </div>

                                <!-- Required fields note -->
                                <p class="text-xs text-gray-500 text-center">
                                    * –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
                                </p>
                            </form>
                        </div>

                        <!-- History Section -->
                        <div class="w-96 bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                    <h3 class="text-lg font-semibold text-gray-900">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤</h3>
                                </div>
                                <div class="flex items-center gap-2">
                                    <button v-if="calculations.length > 0" 
                                            @click="clearHistory"
                                            class="w-8 h-8 bg-red-50 hover:bg-red-100 rounded-lg flex items-center justify-center transition-colors"
                                            title="–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é">
                                        <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                    <div class="w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center">
                                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div v-if="calculations.length === 0" class="text-center py-12">
                                <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                </div>
                                <h4 class="text-base font-medium text-gray-900 mb-2">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–∞—Å—á–µ—Ç–æ–≤</h4>
                                <p class="text-sm text-gray-500">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —Ä–∞—Å—á–µ—Ç</p>
                            </div>
                            
                            <div v-else class="space-y-3 max-h-96 overflow-y-auto">
                                <div v-for="(calc, index) in calculations.slice(0, 10)" :key="calc.id" 
                                     class="group bg-gray-50 hover:bg-blue-50 rounded-2xl p-4 transition-all duration-200 border border-transparent hover:border-blue-100 relative">
                                    
                                    <!-- Delete button -->
                                    <button @click.stop="deleteCalculation(calc.id)"
                                            class="absolute top-3 right-3 w-6 h-6 bg-red-50 hover:bg-red-100 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200"
                                            title="–£–¥–∞–ª–∏—Ç—å —Ä–∞—Å—á–µ—Ç">
                                        <svg class="w-3 h-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                    
                                    <!-- Main content area - clickable -->
                                    <div @click="loadCalculation(calc)" class="cursor-pointer">
                                        <!-- Header with number and price -->
                                        <div class="flex items-center justify-between mb-3 pr-8">
                                            <div class="flex items-center gap-3">
                                                <div class="w-8 h-8 bg-green-100 text-green-700 rounded-lg flex items-center justify-center text-sm font-semibold">
                                                    {{ index + 1 }}
                                                </div>
                                                <div class="text-lg font-bold text-gray-900">{{ formatPrice(calc.price) }}</div>
                                            </div>
                                            <div class="text-xs text-gray-500 bg-white px-2 py-1 rounded-lg group-hover:bg-blue-50">
                                                ¬±15%
                                            </div>
                                        </div>
                                    
                                    <!-- Price per square meter -->
                                    <div class="text-sm text-gray-600 mb-3">
                                        {{ Math.round(calc.price / calc.apartmentData.totalArea).toLocaleString('ru-RU') }} ‚ÇΩ/–º¬≤
                                    </div>
                                    
                                    <!-- Property details -->
                                    <div class="flex items-center gap-4 text-sm text-gray-600 mb-3">
                                        <div class="flex items-center gap-1">
                                            <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m0 0H7m2 0v-4a1 1 0 011-1h2a1 1 0 011 1v4"></path>
                                            </svg>
                                            {{ calc.apartmentData.totalArea }}–º¬≤
                                        </div>
                                        <div class="flex items-center gap-1">
                                            <svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                            </svg>
                                            {{ calc.apartmentData.floor }} —ç—Ç–∞–∂
                                        </div>
                                    </div>
                                    
                                        <!-- Timestamp -->
                                        <div class="flex items-center justify-between">
                                            <div class="text-xs text-gray-500">
                                                <svg class="w-3 h-3 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                </svg>
                                                {{ formatDate(calc.timestamp) }}, {{ new Date(calc.timestamp).toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'}) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div v-if="calculations.length > 10" class="text-center pt-4">
                                    <button class="text-blue-600 text-sm font-medium hover:text-blue-700 bg-blue-50 hover:bg-blue-100 px-4 py-2 rounded-lg transition-colors">
                                        –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ {{ calculations.length - 10 }}
                                    </button>
                                </div>
                            </div>

                            <!-- Current Result Display -->
                            <div v-if="lastResult" class="mt-6 pt-6 border-t border-gray-100">
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-green-700 mb-2">{{ formatPrice(lastResult.price) }}</div>
                                        <div class="text-sm text-green-600 mb-3">
                                            {{ Math.round(lastResult.price / lastResult.apartmentData.totalArea).toLocaleString('ru-RU') }} ‚ÇΩ/–º¬≤
                                        </div>
                                        <div v-if="lastResult.priceRange" class="text-xs text-green-600">
                                            –î–∏–∞–ø–∞–∑–æ–Ω: {{ formatPrice(lastResult.priceRange.min) }} - {{ formatPrice(lastResult.priceRange.max) }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            setup() {
                // State from demo.html
                const apartmentData = ref({
                    totalArea: null,
                    livingArea: null,
                    floor: null,
                    kitchenArea: null,
                    totalFloors: null,
                    passengerElevators: null,
                    cargoElevators: null,
                    yearBuilt: null,
                    balcony: false,
                    garbageChute: false,
                    parking: false,
                    rooms: null,
                    buildingType: null,
                    ceilingHeight: null,
                    separateBathrooms: null,
                    renovation: null,
                    windowView: null,
                    metroDistance: null,
                    objectType: null
                });

                const calculations = ref([]);
                const lastCalculation = ref(null);
                const isCalculating = ref(false);

                // Data arrays from demo.html
                const buildingTypes = ['–ü–∞–Ω–µ–ª—å–Ω—ã–π', '–ö–∏—Ä–ø–∏—á–Ω—ã–π', '–ú–æ–Ω–æ–ª–∏—Ç–Ω–æ-–∫–∏—Ä–ø–∏—á–Ω—ã–π', '–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π', '–°—Ç–∞–ª–∏–Ω—Å–∫–∏–π'];
                const renovationTypes = ['–ë–µ–∑ —Ä–µ–º–æ–Ω—Ç–∞', '–ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π', '–ï–≤—Ä–æ—Ä–µ–º–æ–Ω—Ç', '–î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–π'];
                const objectTypes = ['–í—Ç–æ—Ä–∏—á–∫–∞', '–ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∞'];
                const windowViews = ['–í–æ –¥–≤–æ—Ä', '–ù–∞ —É–ª–∏—Ü—É', '–ù–∞ —É–ª–∏—Ü—É –∏ –¥–≤–æ—Ä'];

                // Computed properties
                const canCalculate = computed(() => {
                    return apartmentData.value.totalArea && 
                           apartmentData.value.livingArea && 
                           apartmentData.value.floor;
                });

                // Load data on mount
                onMounted(() => {
                    const stored = localStorage.getItem('apartmentCalculations');
                    if (stored) {
                        try {
                            calculations.value = JSON.parse(stored);
                        } catch (error) {
                            console.error('Error loading calculations:', error);
                        }
                    }
                });

                // Price calculation function from demo.html
                const calculateApartmentPrice = async (data) => {
                    // Simulate API delay
                    await new Promise(resolve => setTimeout(resolve, 800));
                    
                    const {
                        totalArea,
                        livingArea,
                        kitchenArea,
                        floor,
                        totalFloors,
                        yearBuilt,
                        rooms,
                        buildingType,
                        renovation,
                        balcony,
                        windowView,
                        objectType,
                        metroDistance,
                        garbageChute,
                        parking,
                        ceilingHeight,
                        separateBathrooms,
                        passengerElevators,
                        cargoElevators
                    } = data;

                    // Base price per sqm in Moscow (2025 market data)
                    let basePricePerSqm = 220000;

                    // Building type coefficients
                    const buildingTypeMultipliers = {
                        1: 0.82, // –ü–∞–Ω–µ–ª—å–Ω—ã–π
                        2: 1.08, // –ö–∏—Ä–ø–∏—á–Ω—ã–π
                        3: 1.18, // –ú–æ–Ω–æ–ª–∏—Ç–Ω–æ-–∫–∏—Ä–ø–∏—á–Ω—ã–π
                        4: 1.25, // –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π
                        5: 1.35  // –°—Ç–∞–ª–∏–Ω—Å–∫–∏–π
                    };
                    basePricePerSqm *= buildingTypeMultipliers[buildingType] || 1;

                    // Renovation state impact
                    const renovationMultipliers = {
                        1: 0.75, // –ë–µ–∑ —Ä–µ–º–æ–Ω—Ç–∞
                        2: 0.88, // –ö–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π
                        3: 1.12, // –ï–≤—Ä–æ—Ä–µ–º–æ–Ω—Ç
                        4: 1.35  // –î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–π
                    };
                    basePricePerSqm *= renovationMultipliers[renovation] || 1;

                    // Floor coefficient optimization
                    if (floor && totalFloors) {
                        if (floor === 1) {
                            basePricePerSqm *= 0.92; // –ü–µ—Ä–≤—ã–π —ç—Ç–∞–∂
                        } else if (floor === totalFloors && totalFloors > 5) {
                            basePricePerSqm *= 0.96; // –ü–æ—Å–ª–µ–¥–Ω–∏–π —ç—Ç–∞–∂ –≤ –≤—ã—Å–æ—Ç–Ω–æ–º –¥–æ–º–µ
                        } else if (floor >= 2 && floor <= Math.min(8, totalFloors - 1)) {
                            basePricePerSqm *= 1.08; // –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —ç—Ç–∞–∂–∏
                        } else if (floor > 15) {
                            basePricePerSqm *= 0.98; // –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–µ —ç—Ç–∞–∂–∏
                        }
                    }

                    // New building premium
                    if (objectType === 2) {
                        basePricePerSqm *= 1.18;
                    }

                    // Window view impact
                    const windowViewMultipliers = {
                        1: 0.94, // –í–æ –¥–≤–æ—Ä
                        2: 1.06, // –ù–∞ —É–ª–∏—Ü—É
                        3: 1.12  // –ù–∞ —É–ª–∏—Ü—É –∏ –¥–≤–æ—Ä
                    };
                    basePricePerSqm *= windowViewMultipliers[windowView] || 1;

                    // Metro accessibility - critical factor in Moscow
                    if (metroDistance !== null && metroDistance !== undefined) {
                        if (metroDistance <= 3) {
                            basePricePerSqm *= 1.25; // –í —à–∞–≥–æ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
                        } else if (metroDistance <= 7) {
                            basePricePerSqm *= 1.15; // –ë–ª–∏–∑–∫–æ –∫ –º–µ—Ç—Ä–æ
                        } else if (metroDistance <= 15) {
                            basePricePerSqm *= 1.02; // –£–º–µ—Ä–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
                        } else {
                            basePricePerSqm *= 0.88; // –î–∞–ª–µ–∫–æ –æ—Ç –º–µ—Ç—Ä–æ
                        }
                    }

                    // Building age factor
                    if (yearBuilt) {
                        const currentYear = new Date().getFullYear();
                        const age = currentYear - yearBuilt;
                        if (age < 3) {
                            basePricePerSqm *= 1.22; // –ù–æ–≤–∞—è –ø–æ—Å—Ç—Ä–æ–π–∫–∞
                        } else if (age < 10) {
                            basePricePerSqm *= 1.12; // –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∂–∏–ª—å–µ
                        } else if (age < 25) {
                            basePricePerSqm *= 1.00; // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                        } else if (age < 40) {
                            basePricePerSqm *= 0.95; // –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                        } else {
                            basePricePerSqm *= 0.88; // –°—Ç–∞—Ä—ã–π —Ñ–æ–Ω–¥
                        }
                    }

                    // Infrastructure and amenities
                    if (balcony) basePricePerSqm *= 1.04;
                    if (parking) basePricePerSqm *= 1.08;
                    if (garbageChute) basePricePerSqm *= 1.03;

                    // Elevator availability
                    if (passengerElevators && passengerElevators > 0) {
                        basePricePerSqm *= 1.02;
                    }
                    if (cargoElevators && cargoElevators > 0) {
                        basePricePerSqm *= 1.01;
                    }

                    // Kitchen area premium
                    if (kitchenArea) {
                        if (kitchenArea > 12) {
                            basePricePerSqm *= 1.05; // –ë–æ–ª—å—à–∞—è –∫—É—Ö–Ω—è
                        } else if (kitchenArea < 7) {
                            basePricePerSqm *= 0.97; // –ú–∞–ª–µ–Ω—å–∫–∞—è –∫—É—Ö–Ω—è
                        }
                    }

                    // Ceiling height factor
                    if (ceilingHeight) {
                        if (ceilingHeight > 3.0) {
                            basePricePerSqm *= 1.06; // –í—ã—Å–æ–∫–∏–µ –ø–æ—Ç–æ–ª–∫–∏
                        } else if (ceilingHeight < 2.6) {
                            basePricePerSqm *= 0.96; // –ù–∏–∑–∫–∏–µ –ø–æ—Ç–æ–ª–∫–∏
                        }
                    }

                    // Bathroom configuration
                    if (separateBathrooms && separateBathrooms > 1) {
                        basePricePerSqm *= 1.03;
                    }

                    // Room count optimization
                    if (rooms && totalArea) {
                        const areaPerRoom = totalArea / rooms;
                        if (areaPerRoom > 25) {
                            basePricePerSqm *= 1.02; // –ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
                        } else if (areaPerRoom < 15) {
                            basePricePerSqm *= 0.98; // –ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–æ–º–Ω–∞—Ç—ã
                        }
                    }

                    // Calculate final price
                    const basePrice = basePricePerSqm * totalArea;
                    
                    // Market volatility simulation
                    const volatility = 0.08;
                    const randomFactor = 1 + (Math.random() - 0.5) * volatility * 2;
                    const finalPrice = Math.round(basePrice * randomFactor);
                    
                    // Price range calculation (¬±12% for realistic spread)
                    const rangeVariation = 0.12;
                    const minPrice = Math.round(finalPrice * (1 - rangeVariation));
                    const maxPrice = Math.round(finalPrice * (1 + rangeVariation));

                    return {
                        price: finalPrice,
                        priceRange: { min: minPrice, max: maxPrice }
                    };
                };

                const calculatePrice = async () => {
                    if (!canCalculate.value || isCalculating.value) return;
                    
                    isCalculating.value = true;
                    
                    try {
                        const result = await calculateApartmentPrice(apartmentData.value);
                        
                        const calculationResult = {
                            id: Date.now().toString(),
                            timestamp: new Date(),
                            apartmentData: { ...apartmentData.value },
                            price: result.price,
                            priceRange: result.priceRange
                        };
                        
                        lastCalculation.value = calculationResult;
                        calculations.value.unshift(calculationResult);
                        
                        // Save to localStorage
                        localStorage.setItem('apartmentCalculations', JSON.stringify(calculations.value));
                        
                    } catch (error) {
                        console.error('Calculation error:', error);
                    } finally {
                        isCalculating.value = false;
                    }
                };

                const loadCalculation = (calc) => {
                    Object.assign(apartmentData.value, calc.apartmentData);
                    lastCalculation.value = calc;
                };

                const deleteCalculation = (calcId) => {
                    if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞—Å—á–µ—Ç?')) {
                        calculations.value = calculations.value.filter(calc => calc.id !== calcId);
                        
                        // If deleted calculation was the last result, clear it
                        if (lastCalculation.value && lastCalculation.value.id === calcId) {
                            lastCalculation.value = null;
                        }
                        
                        // Save updated calculations to localStorage
                        localStorage.setItem('apartmentCalculations', JSON.stringify(calculations.value));
                    }
                };

                const clearHistory = () => {
                    if (confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —Ä–∞—Å—á–µ—Ç–æ–≤? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                        calculations.value = [];
                        lastCalculation.value = null;
                        localStorage.removeItem('apartmentCalculations');
                    }
                };

                const formatPrice = (price) => {
                    if (!price) return '';
                    return new Intl.NumberFormat('ru-RU', {
                        style: 'currency',
                        currency: 'RUB',
                        minimumFractionDigits: 0
                    }).format(price);
                };

                const formatDate = (date) => {
                    return new Date(date).toLocaleDateString('ru-RU');
                };

                return {
                    apartmentData,
                    calculations,
                    lastResult: lastCalculation,
                    isCalculating,
                    buildingTypes,
                    renovationTypes,
                    objectTypes,
                    windowViews,
                    canCalculate,
                    calculatePrice,
                    loadCalculation,
                    deleteCalculation,
                    clearHistory,
                    formatPrice,
                    formatDate
                };
            }
        };



        // About component
        const About = {
            template: `
                <div class="space-y-6">
                    <div class="bg-white rounded-lg shadow-lg p-8">
                        <h1 class="text-3xl font-bold text-gray-900 mb-6">–û –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ</h1>
                        
                        <div class="prose max-w-none">
                            <p class="text-lg text-gray-700 mb-6">
                                –ù–∞—à –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –æ—Ü–µ–Ω–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, 
                                –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ú–æ—Å–∫–≤—ã –∏ –æ–±–ª–∞—Å—Ç–∏.
                            </p>

                            <h2 class="text-2xl font-semibold text-gray-900 mb-4">–§–∞–∫—Ç–æ—Ä—ã –æ—Ü–µ–Ω–∫–∏</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <div class="bg-blue-50 rounded-lg p-4">
                                    <h3 class="font-semibold text-blue-900 mb-2">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã</h3>
                                    <ul class="text-sm text-blue-800 space-y-1">
                                        <li>‚Ä¢ –û–±—â–∞—è –∏ –∂–∏–ª–∞—è –ø–ª–æ—â–∞–¥—å</li>
                                        <li>‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç</li>
                                        <li>‚Ä¢ –≠—Ç–∞–∂ –∏ —ç—Ç–∞–∂–Ω–æ—Å—Ç—å –¥–æ–º–∞</li>
                                        <li>‚Ä¢ –ü–ª–æ—â–∞–¥—å –∫—É—Ö–Ω–∏</li>
                                        <li>‚Ä¢ –í—ã—Å–æ—Ç–∞ –ø–æ—Ç–æ–ª–∫–æ–≤</li>
                                    </ul>
                                </div>
                                
                                <div class="bg-green-50 rounded-lg p-4">
                                    <h3 class="font-semibold text-green-900 mb-2">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–æ–º–∞</h3>
                                    <ul class="text-sm text-green-800 space-y-1">
                                        <li>‚Ä¢ –¢–∏–ø –ø–æ—Å—Ç—Ä–æ–π–∫–∏</li>
                                        <li>‚Ä¢ –ì–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏</li>
                                        <li>‚Ä¢ –ù–∞–ª–∏—á–∏–µ –ª–∏—Ñ—Ç–æ–≤</li>
                                        <li>‚Ä¢ –ú—É—Å–æ—Ä–æ–ø—Ä–æ–≤–æ–¥</li>
                                        <li>‚Ä¢ –ü–∞—Ä–∫–æ–≤–∫–∞</li>
                                    </ul>
                                </div>
                            </div>

                            <h2 class="text-2xl font-semibold text-gray-900 mb-4">–§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="text-center p-4 border rounded-lg">
                                    <div class="text-2xl mb-2">üè†</div>
                                    <h3 class="font-semibold mb-2">–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h3>
                                    <p class="text-sm text-gray-600">–¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</p>
                                </div>
                                
                                <div class="text-center p-4 border rounded-lg">
                                    <div class="text-2xl mb-2">üìä</div>
                                    <h3 class="font-semibold mb-2">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                                    <p class="text-sm text-gray-600">–ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∞—à–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤</p>
                                </div>
                                
                                <div class="text-center p-4 border rounded-lg">
                                    <div class="text-2xl mb-2">üìÑ</div>
                                    <h3 class="font-semibold mb-2">–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤</h3>
                                    <p class="text-sm text-gray-600">PDF –∏ Excel –æ—Ç—á–µ—Ç—ã –¥–ª—è –ø–µ—á–∞—Ç–∏</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        // Routes
        const routes = [
            { path: '/', component: Calculator },
            { path: '/about', component: About }
        ];

        // Router
        const router = createRouter({
            history: createWebHashHistory(),
            routes
        });

        // Create simple app with router
        const app = createApp({});
        app.use(router);
        app.mount('#app');
    </script>
</body>
</html>